<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHOBU HSE Versenyrendszer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="stilus.css">
    <link rel="icon" href="logo.jpg">
</head>

<body class="oldal-alap-hattere">

    <div id="login-overlay" class="teljes-kepernyos-fekete-hatter">
        <div class="feher-bejelentkezo-doboz login-card">

            <h1 class="focim">
                SHOBU HSE <span class="piros-kiemeles">VERSENYRENDSZER</span>
            </h1>

            <div class="beviteli-mezok-taroloja">
                <input id="login-user" type="text" placeholder="Felhasználónév" class="szoveg-doboz">
                <input id="login-pass" type="password" placeholder="Jelszó" class="szoveg-doboz">
                <button onclick="bejelentkezes()" class="belepes-gomb">BELÉPÉS</button>
            </div>
            
            <div class="jelszo-emlekezteto-doboz">
                Teszt: <b>KoloMarki / 1234</b>, <b>A tatami / A-tatami</b>, <b>Balint.Tornai / 1234</b>
            </div>
        </div>
    </div>

    <div id="app" class="fo-alkalmazas-tarolo hidden">
        
        <nav class="felso-menusor">
            <div class="menu-tartalom">
                
                <div class="logonk">
                    <span class="logo-szoveg">SHOBU HSE <span class="piros-kiemeles">Versenyrendszer</span></span>
                    <span id="user-badge" class="felhasznalo-jelzo">Vendég</span>
                </div>
                
                <div class="menu-gombok">
                    <button id="nav-reg" onclick="valtFul('reg')" class="menu-gomb-nevezes hidden">Nevezés</button>
                    <button onclick="valtFul('bracket')" class="menu-gomb-kumite">Kumite Ágrajz</button>
                    <button onclick="valtFul('kata')" class="menu-gomb-kata">KATA Eredmények</button>
                    <button onclick="kijelentkezes()" class="menu-gomb-kilepes">Kilépés</button>
                </div>

            </div>
        </nav>

        <section id="tab-reg" class="nevezes-oldal hidden">
            <div class="nevezes-feher-doboz">
                <h2 class="doboz-cime">Versenyzők hozzáadása</h2>
                
                <div class="urlap-racs">
                    <input id="p-name" type="text" placeholder="Név" class="urlap-szovegdoboz">
                    <input id="p-dojo" type="text" placeholder="Klub" class="urlap-szovegdoboz">

                    <select id="p-gender" onchange="frissitKategoriaLegordulot()" class="urlap-legordulo">
                        <option value="">Nem kiválasztása...</option>
                        <option value="Boys">Fiú</option>
                        <option value="Girls">Lány</option>
                        <option value="Men">Férfi</option>
                        <option value="Women">Női</option>
                    </select>
                    
                    <input id="p-age" type="number" placeholder="Kor" oninput="frissitKategoriaLegordulot()" class="urlap-szamdoboz">
                    <input id="p-weight" type="number" placeholder="Súly (kg)" class="urlap-szamdoboz">
                    <input id="p-height" type="number" placeholder="Magasság (cm)" class="urlap-szamdoboz">

                    <select id="p-cat" class="urlap-kategoria-valaszto">
                        <option value="">Előbb add meg a kort és a nemet!</option>
                    </select>
                </div>
                
                <button onclick="hozzaadVersenyzot()" class="hozzaadas-gomb">HOZZÁADÁS</button>

                <div class="nevezettek-listaja-doboz">
                    <h3 class="lista-cime">Nevezettek listája</h3>
                    <ul id="player-list" class="lista-elemek"></ul>
                </div>

                <div id="admin-controls" class="admin-gombok hidden">
                    <button onclick="generalKumite()" class="admin-gomb-sorsolas">Kumite Sorsolás</button>
                    <button onclick="inditKataVerseny()" class="admin-gomb-kata">Kata Indítása</button>
                    <button onclick="toroljMindent()" class="admin-gomb-torles">Teljes Adatbázis Törlése</button>
                </div>
            </div>
        </section>

        <section id="tab-bracket" class="kumite-agrajz-oldal hidden">
            <div id="bracket-view" class="agrajz-taroloja bracket-container"></div>
        </section>

        <section id="tab-kata" class="kata-eredmenyek-oldal hidden">
            <div id="kata-content" class="kata-taroloja"></div>
        </section>

        <section id="tab-referee" class="biroi-panel-hatter hidden">
            <div class="biroi-panel-doboz">
                
                <button onclick="valtFul('bracket')" class="bezaras-gomb">✕</button>

                <div class="idozito-reszleg">
                    <h3 id="match-category-title" class="meccs-kategoria-cime">Kategória</h3>
                    <div id="timer" class="hatalmas-idozito timer-glow">02:00</div>
                    
                    <div class="idozito-gombok">
                        <button onclick="kapcsolIdozitot()" id="btn-timer" class="ido-start-gomb">START</button>
                        <button onclick="nullazMeccsPontszamokat()" class="ido-reset-gomb">RESET</button>
                    </div>
                </div>

                <div class="jatekosok-reszlege">
                    <div class="kek-jatekos-oldala">
                        <div class="szin-jelzo">
                            <div class="kicsi-kek-negyzet"></div>
                            <span class="szin-szoveg-kek">AKA</span>
                        </div>
                        <div class="jatekos-neve" id="ref-aka">A Játékos</div>
                        <div class="jatekos-pontja" id="score-aka">0</div>
                        
                        <div class="pontadas-gombok">
                            <button onclick="pontszamAdas('aka', 1)" class="pont-gomb pont-gomb-kek">WAZARI (1)</button>
                            <button onclick="pontszamAdas('aka', 2)" class="pont-gomb pont-gomb-kek-vilagos">IPPON (2)</button>
                        </div>
                    </div>
                    
                    <div class="piros-jatekos-oldala">
                        <div class="szin-jelzo">
                            <div class="kicsi-piros-negyzet"></div>
                            <span class="szin-szoveg-piros">SHIRO</span>
                        </div>
                        <div class="jatekos-neve" id="ref-shiro">B Játékos</div>
                        <div class="jatekos-pontja" id="score-shiro">0</div>
                        
                        <div class="pontadas-gombok">
                            <button onclick="pontszamAdas('shiro', 1)" class="pont-gomb pont-gomb-piros">WAZARI (1)</button>
                            <button onclick="pontszamAdas('shiro', 2)" class="pont-gomb pont-gomb-piros-vilagos">IPPON (2)</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer class="lablec-tarolo">
        <div class="lablec-tartalom">
            
            <div class="lablec-bal-oldal">
                <h3 class="lablec-cime">SHOBU HSE <span class="piros-kiemeles">Versenyrendszer</span></h3>
                <p class="lablec-leiras">
                    Professzionális Kyokushin Karate versenykezelő szoftver. 
                    Készült a modern és gyors versenybonyolítás támogatására.
                    Készítette: Kolonics Márk
                </p>
            </div>
            
            <div class="lablec-jobb-oldal">
                <a href="#" class="lablec-link">Kapcsolat</a>
                <a href="#" class="lablec-link">Adatvédelem</a>
                <a href="#" class="lablec-link">Súgó</a>
            </div>

        </div>
        
        <div class="lablec-also-sav">
            <p>&copy; 2026 SHOBU HSE. Minden jog fenntartva.</p>
        </div>
    </footer>
    <!-- ============================================ -->
    <!-- SCRIPT FÁJLOK BETÖLTÉSE - RENDEZETT SORRENDBEN -->
    <!-- ============================================ -->

    <!-- 1. data.js - Alapadatok betöltése -->
    <!-- Ez a fájl tartalmazza: versenyzők listája, kategóriák, felhasználók adatai -->
    <script src="data.js"></script>

    <!-- 2. auth.js - Bejelentkezés és jogosultságok -->
    <!-- Ez a fájl kezeli: belépés, kijelentkezés, felhasználói szerepkörök, nézetváltás -->
    <script src="auth.js"></script>

    <!-- 3. kumite.js - Kumite verseny kezelése -->
    <!-- Ez a fájl kezeli: sorsolás, ágrajz generálása, bírói panel, pontszámítás -->
    <script src="kumite.js"></script>

    <!-- 4. kata.js - Kata verseny kezelése -->
    <!-- Ez a fájl kezeli: kata pontozás, fordulók, TOP 6 kiválasztása -->
    <script src="kata.js"></script>

    <!-- ============================================ -->
    <!-- BETÖLTÉSI ELLENŐRZÉS - DEBUG KÓD -->
    <!-- ============================================ -->
    <script>
        // Ez a függvény ellenőrzi, hogy minden szükséges fájl betöltődött-e
        // Ha valami hiányzik, hibát ír a konzolra, hogy könnyebb legyen a hibakeresés
        function ellenorizFuggvenyeket() {
            // Első lépés: ellenőrizzük az auth.js fájlt
            // A bejelentkezes függvénynek léteznie kell, ha az auth.js betöltődött
            var bejelentkezesFuggvenyLetezik = typeof bejelentkezes === "function";
            if (!bejelentkezesFuggvenyLetezik) {
                console.error("HIBA: Az auth.js nem töltődött be, a bejelentkezes függvény hiányzik!");
            }
            // Második lépés: ellenőrizzük a data.js fájlt
            // A FELHASZNALOK tömbnek léteznie kell, ha a data.js betöltődött
            var felhasznalokTombLetezik = typeof FELHASZNALOK !== "undefined";
            if (!felhasznalokTombLetezik) {
                console.error("HIBA: A data.js nem töltődött be, a FELHASZNALOK tömb hiányzik!");
            }

        }

        // Amikor az oldal teljesen betöltődött, futtatjuk az ellenőrzést
        window.onload = function () {
            console.log("Rendszer betöltve.");
            // Külön lépésben ellenőrizzük a függőségeket
            ellenorizFuggvenyeket();
        };
    </script>
</body>
</html>